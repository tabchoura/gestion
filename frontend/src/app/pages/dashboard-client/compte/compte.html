<div class="wrap">
  <h2>ðŸ’³ Mes Comptes Bancaires</h2>
  <div class="card">
    <div class="table">
      <!-- EntÃªte -->
      <div class="thead">
        <div>Type de Compte</div>
        <div>NÂ° Compte</div>
        <div>RIB</div>
        <div class="thead-actions">
          Actions
          <button class="btn-add" (click)="startAdd()" title="Ajouter un compte">âž• Ajouter</button>
        </div>
      </div>

      <!-- Formulaire inline ajout/Ã©dition -->
      <form *ngIf="isAdding() || isEditing()" [formGroup]="form" (ngSubmit)="submit()" class="inline-form">
        <select formControlName="typeCompte" required>
          <option value="" disabled>SÃ©lectionner un type de compte *</option>
          <option value="compte-epargne">Compte Ã©pargne</option>
          <option value="compte-courant">Compte courant</option>
          <option value="compte-devises">Compte devises</option>
          <option value="compte-specifique">Compte spÃ©cifique ou investissement</option>
          <option value="compte-joint">Compte joint</option>
          <option value="compte-professionnel">Compte professionnel / entreprise</option>
        </select>
        <input formControlName="numeroCompte" placeholder="NÂ° Compte *" />
        <input formControlName="rib" maxlength="20" placeholder="RIB (20 chiffres, optionnel)" />
        <div class="inline-actions">
          <select formControlName="devise">
            <option *ngFor="let d of devises" [value]="d">{{ d }}</option>
          </select>
          
          <button type="submit" [disabled]="form.invalid || savingFn()">
            {{ isEditing() ? 'Enregistrer' : 'Ajouter' }}
          </button>
          
          <button type="button" class="ghost" (click)="isEditing() ? cancelEdit() : cancelAdd()">
            Annuler
          </button>
        </div>
      </form>

      <!-- Lignes -->
      <div class="rowitem" *ngFor="let c of comptesFn()">
        <div>
          <b>{{ getTypeCompteLabel(c.typeCompte) }}</b> 
          <span class="muted" *ngIf="c.devise">Â· {{ c.devise }}</span>
        </div>
        <div>{{ c.numeroCompte }}</div>
        <div>{{ formatRib(c.rib) }}</div>
        <div class="rowactions">
          <!-- ðŸ”¥ Bouton qui navigue vers /dashboardclient/demandes/:id -->
          <button type="button"
                  class="mini"
                  (click)="voirChequier(c, $event)"
                  title="Voir chÃ©quier">
            Voir chÃ©quier
          </button>
          
          <button class="mini warn" (click)="startEdit(c)" title="Modifier">Ã‰diter</button>
          <button class="mini danger" (click)="delete(c)" title="Supprimer">Supprimer</button>
        </div>
      </div>

      <!-- Ã‰tats -->
      <div *ngIf="!loadingFn() && comptesFn().length === 0" class="muted pad">Aucun compte.</div>
      <div *ngIf="loadingFn()" class="muted pad">Chargementâ€¦</div>
    </div>
  </div>
</div>